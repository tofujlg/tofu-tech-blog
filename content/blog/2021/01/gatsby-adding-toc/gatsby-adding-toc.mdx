---
title: "Gatsby.js ãƒ–ãƒ­ã‚°è¨˜äº‹ã«ç›®æ¬¡ã‚’è¿½åŠ ã™ã‚‹"
date: "2021-01-13"
tags: ["Gatsby"]
emoji: "ğŸ“‘"
---

## ç›®æ¨™
Gatsbyè£½ã®ãƒ–ãƒ­ã‚°ã«Table of Contenté¢¨ã®ç›®æ¬¡ã‚’è¿½åŠ ã—ãŸã„ã€‚
ãã®éš›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã—ã¦ä»»æ„ã®å ´æ‰€ã«è¨­ç½®ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚

## gatsby-remark-autolink-headers plugin
[gatsby-remark-autolink-headers](https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/)ã¯
-   è¦‹å‡ºã—ã‚¿ã‚°ã«idã‚’æŒ¯ã‚‹
-   è‡ªå‹•ã§ç›®æ¬¡ã‚’ä½œæˆã—ã¦ãã‚Œã‚‹(ãªãœã ã‹åƒ•ã®å ´åˆã¯é–“é•ã£ãŸslugãŒä½œæˆã•ã‚Œã¦ä½¿ãˆãšâ€¦)

<br/>
ã‚’ã—ã¦ãã‚Œã‚‹ã€‚

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash:title=console
npm install gatsby-remark-autolink-headers
```

### Gatsby-config.jsã«è¿½åŠ 
Gatsby-remark-autolink-headersã¯gatsby-transformer-remarkã®ã‚µãƒ–ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã®ã§ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«è¿½åŠ ã—ã¾ã™ã€‚
ãã—ã¦ã“ã®éš›ã€gatsby-remark-prismjsã‚’å°å…¥ã—ã¦ã„ã‚‹éš›ã¯ãã‚Œã‚ˆã‚Šå‰ã«è¿½åŠ ã™ã‚‹ã‚ˆã†ã«ã¨å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

<br/>

```js{5}:title=gatsby-config.js
{
resolve: "gatsby-transformer-remark",
options: {
plugins: [
"gatsby-remark-autolink-headers",
"gatsby-remark-code-titles",
"gatsby-remark-prismjs",
}
```

## slugå•é¡Œ
ã“ã“ã§å°‘ã—å•é¡ŒãŒã€‚
gatsby-remark-autolink-headersãŒGraphQLã«è¿½åŠ ã—ã¦ãã‚ŒãŸTableOfContentãŒè‡ªå‹•çš„ã«ç”Ÿæˆã—ã¦ãã‚Œã‚‹ãƒªãƒ³ã‚¯ãŒæ­£ã—ãç„¡ã„ã®ã§ã“ã‚ŒãŒä½¿ãˆãªã„ã“ã¨ãŒåˆ¤æ˜ã€‚è§£æ±ºæ³•ã‚’æ¢ã—ã¦ã‚‚ã‚ˆã‹ã£ãŸã®ã ãŒã€è‡ªå‰ã§ä½œã‚‹ã“ã¨ã«ã—ãŸã€‚

## React-scrollã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
è¦‹å‡ºã—ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è©²å½“ç®‡æ‰€ã«ã¾ã§ç§»å‹•ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã‚’ã¤ã‘ãŸã„ã®ã§[react-scroll](https://www.npmjs.com/package/react-scroll)ã¨ã„ã†npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```bash:title=console
npmÂ installÂ react-scroll
```

â€»Gatsby Linkã§ã‚‚å®Ÿè£…ã§ãã¾ã™ã®ã§ã€Smooth scrollingãŒå¿…è¦ãªã„ã¨æ€ã†æ–¹ã¯é£›ã°ã—ã¦ãã ã•ã„ã€‚

## ç›®æ¬¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

```js{14,15,16}:title=tableOfContents.js
import React from "react"
import { Link } from "react-scroll"
import tableOfContentsStyles from "./tableOfContents.module.scss"
  
const TableOfContents = props => {
return (
<div className={tableOfContentsStyles.tableOfContents}>
<h2 className ={tableOfContentsStyles.title}>ç›®æ¬¡</h2>

{props.headings.map(heading => (
<Link

smooth={true}
to={heading.id}
//--Gatsby Link ã®å ´åˆ
//to={`/blog/${props.slug}/#${heading.id}`}

duration={1000}
className={tableOfContentsStyles.heading}

>
{heading.value}
</Link>
))}

</div>
)
}

export default TableOfContents

```
h1,h2,h3ãªã©è¦‹å‡ºã—ã®å¤§ãã•ã¯ç„¡è¦–ã—ãŸç›®æ¬¡ã‚’ä½œæˆã—ãŸã„ã®ã§ã€è¦‹å‡ºã—ã‚’å…¨ã¦æ‹¾ã£ã¦ãã¦ã€react-scrollã®Linkã‚’ä½œæˆã—ã¾ã—ãŸã€‚
ã“ã®éš›toãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯urlã§ã¯ãªãã€è¦‹å‡ºã—ã®åå‰ã«è¨­å®šã—ã¾ã™ã€‚
â€»Gatsby Linkã®å ´åˆã¯urlã§è¨˜å…¥ã€‚

## Blog Templateã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«TOCã‚’æŒ¿å…¥

ã“ã®éš›ã€markdownRemarkã®graphQLã«ã¦headingã¨idã‚’æŒ‡å®šã—ãªã„ã¨å‹•ã‹ãªã„ã€‚